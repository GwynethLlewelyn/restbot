#summary Documentation on the API calls for REStbot

= Introduction =

The original instructions are minimalistic, they just deal with establishing a connection and exiting a bot.

Except for establishing a connection, the _original_ REST API is as following:

Call {{{ http://your-host-where-RESTbot-lives.com:9080/<command_name>/<session_id> }}}

while on the POST data you put the actual parameters

Establishing a connection will give you the {{{ <session_id> }}}

= Establishing a Connection =

using cURL:

{{{ curl http://localhost:9080/establish_session/<RESTbot password> -d first=<BotFirstName> -d last=<BotLastName> -d pass=<md5'ed bot password> }}}

RESTbot password: the default is simply {{{pass}}}.

This will return a _session identification key_.

= Exiting =

{{{ curl http://localhost:9080/exit/<session_id> }}}

where session_id is the session identification key received on the previous call.

Returns:

{{{
<restbot><disposed>true</disposed></restbot>
}}}

= Avatar Plugin =

== avatar_name ==

Parameters: key

{{{ curl http://localhost:9080/avatar_key/<session_id>/ -d key=d2cdf457-5027-4887-abd8-573c62a85226 }}}

Returns:

{{{
<restbot><name>Gwyneth Llewelyn</name>
</restbot>
}}}

== avatar_key ==

Parameters: name

{{{ curl http://localhost:9080/avatar_key/<session_id>/ -d name=Gwyneth%20Llewelyn }}}

Returns:

{{{
<restbot><key>d2cdf457-5027-4887-abd8-573c62a85226</key>
</restbot>
}}}

== avatar_online ==

Parameters: key

{{{ curl http://localhost:9080/avatar_online/<session_id>/ -d key=d2cdf457-5027-4887-abd8-573c62a85226 }}}

Returns:

{{{
<restbot><online>False</online>
</restbot>
}}}

== avatar_profile ==

Parameters: key

{{{ curl http://localhost:9080/avatar_profile/<session_id>/ -d key=d2cdf457-5027-4887-abd8-573c62a85226 }}}

Returns:

{{{
<restbot><profile>
<publish>True</publish>
<firstlife>
<text>In RL I work for Beta Technologies: http://betatechnologies.info

What should I say more? I'm 40 and in a stable relationship, currently living in Portugal, at Europe's westernmost tip.
</text>
<image>0488b909-b5d7-dd58-fe96-600a801d6c6f</image>
</firstlife>
<partner>00000000-0000-0000-0000-000000000000</partner>
<born>7/31/2004</born>
<about>I'm accused by immersionists of being an augmentist; and augmentists believe I'm an immersionist. But I'm really just a virtual girl in a virtual world, enjoying this space just like you :)

Second Life mirrors the real life. The good and the bad of it.

Email me at gwyneth.llewelyn@gwynethllewelyn.net

... and in real life, I'm the European Operations Manager for Beta Technologies.

Joaz Janus: A rose by any other name would render so slowly

Distorted image? Well, I'm using a viewer that likes it!</about>
<charter>Resident</charter>
<profileimage>71416a9e-25a2-6e95-f96f-31bfb88ea7bc</profileimage>
<mature>False</mature>
<identified>True</identified>
<transacted>True</transacted>
<url>http://gwynethllewelyn.net/</url>
</profile>
</restbot>
}}}

== avatar_groups ==

Parameters: key

{{{ curl http://localhost:9080/avatar_profile/<session_id>/ -d key=d2cdf457-5027-4887-abd8-573c62a85226 }}}

Returns:

{{{
<restbot><groups>
<group>
<name>Fashion Consolidated</name>
<key>0726f59a-ca0c-9e73-7c1e-075c5242eb5b</key>
<title>FashConnoisseur</title>
<notices>True</notices>
<powers>SendNotices, ReceiveNotices, VoteOnProposal</powers>
<insignia>349d1efa-176d-9995-a3f2-ffd4f61cc0e3</insignia>
</group>
<group>
<name>Neufreistadt</name>
<key>1436766e-2212-1062-fe69-f43b0095c890</key>
<title>Neufreistadter</title>
<notices>True</notices>
<powers>18446744073709551615</powers>
<insignia>31c58113-f7e7-f282-acf8-6265acab8285</insignia>
</group>
<group>
...
</group>
</groups>
</restbot>
}}}

= Reaper Plugin =

== reaper_info ==

Function unknown. Seems to have no parameters.

Apparently is tied to an internal garbage collector _or_ deals with specific applications for Pleiades.

= Stats Plugin =

== dilation ==

{{{ curl http://localhost:9080/dilation/<session_id> }}}

Returns:

{{{
<restbot><dilation>0,9987054</dilation>
</restbot>
}}}

where the value is the current sim's dilation.

== sim_stat ==

{{{ curl http://localhost:9080/sim_stat/<session_id> }}}

Returns:

{{{
<restbot><stats>
<dilation>0,9964779</dilation>
<inbps>459</inbps>
<outbps>210</outbps>
<resentout>0</resentout>
<resentin>0</resentin>
<queue>0</queue>
<fps>45</fps>
<physfps>44,90754</physfps>
<agentupdates>2</agentupdates>
<objects>82</objects>
<scriptedobjects>2</scriptedobjects>
<agents>2</agents>
<childagents>0</childagents>
<activescripts>20</activescripts>
<lslips>0</lslips>
<inpps>31</inpps>
<outpps>29</outpps>
<pendingdownloads>0</pendingdownloads>
<pendinguploads>0</pendinguploads>
<virtualsize>0</virtualsize>
<residentsize>0</residentsize>
<pendinglocaluploads>0</pendinglocaluploads>
<unackedbytes>106</unackedbytes>
<time>
<frame>22,24652</frame>
<image>0,009069572</image>
<physics>0,2268104</physics>
<script>0,1629531</script>
<other>0,1085776</other>
</time>
</stats>
</restbot>
}}}

= New Functionality =

The commands below are new and manually added.

= Groups Plugin =

== group_key_activate ==

Used to set the avatar to an active group, using the group UUID. Returns active group and, in parenthesis, the group's role that is shown on the title.

Can be set to NULL key (00000000-0000-0000-0000-000000000000) to unset group.

{{{ curl http://localhost:9080/group_key_activate/<session_id> -d key=150829ee-a295-4ef6-3965-9f5c77ac3b52 }}}

Returns:

{{{
<restbot><active>Beta Technologies (Beta Technologies)</active>
</restbot>
}}}

== group_name_activate ==

Used to set the avatar to an active group, using the group name. Returns active group and, in parenthesis, the group's role that is shown on the title.


{{{ curl http://localhost:9080/group_name_activate/<session_id> -d name=Beta%20Technologies }}}

Returns:

{{{
<restbot><active>Beta Technologies (Beta Technologies)</active>
</restbot>
}}}

== group_im ==

Sends messages in Group IM Chat (on any group the 'bot has joined). Returns just if the message was sent or not.

Parameters are the UUID key for the group and a text message (urlencoded)

{{{ curl http://localhost:9080/group_im/<session_id> -d key=<group UUID> -d message="This%20is%20a%20test" }}}

Returns:

{{{
<restbot><message>message sent</message></restbot>
}}}

= Inventory Plugin =

== list_inventory ==

Returns the whole inventory of this avatar. With an empty key, it starts from the root folder; add a folder key to just list that folder instead

Parameters: key <folder UUID> for the folder where it should start

{{{ curl http://localhost:9080/list_inventory/<session_id> -d key=<folder UUID>}}}

Returns:

{{{
<restbot><inventory><item><name>...</name><itemid>...</itemid></item>...</inventory></restbot>
}}}

== list_item ==

Returns information from a single item in the inventory of this avatar.

Parameters: key <key UUID> for the item ID

{{{ curl http://localhost:9080/list_item/<session_id> -d key=<item ID>}}}

Returns:

{{{
<restbot><item><AssetUUID>251ff15a-25c5-ebd7-ea13-c45e4e520f23</AssetUUID><PermissionsOwner>---</PermissionsOwner><PermissionsGroup>---</PermissionsGroup><AssetType>Texture</AssetType><InventoryType>Texture</InventoryType><CreatorID>d2cdf457-5027-4887-abd8-573c62a85226</CreatorID><Description>(No Description)</Description><GroupID>00000000-0000-0000-0000-000000000000</GroupID><GroupOwned>False</GroupOwned><SalePrice>10</SalePrice><SaleType>Not</SaleType><Flags>0</Flags><CreationDate>19-06-2009 18:20:35</CreationDate><LastOwnerID>00000000-0000-0000-0000-000000000000</LastOwnerID></item>
}}}

== give_item ==

Transfers a single item from the inventory of this avatar to another avatar.

Parameters: itemID <key UUID> for the item ID to give

avatarKey <avatar UUID> for the recipient's avatar UIID

{{{ curl http://localhost:9080/list_item/<session_id> -d itemID=<item ID> -d avatarKey=<avatar UUID>}}}

Returns:

{{{
<restbot><item><name>BetaTech_OV_RGB</name><assetType>Texture</assetType><itemID>6e89002b-6788-ecc5-c314-95f795b08cd8</itemID><avatarKey>d2cdf457-5027-4887-abd8-573c62a85226</avatarKey></item>
</restbot>
}}}